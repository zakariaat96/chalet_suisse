{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\real_estate_project\\\\src\\\\pages\\\\ChaletDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect, useCallback, useMemo } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { FiMapPin, FiHome, FiLayers, FiDroplet, FiUsers, FiCalendar, FiStar, FiWifi, FiCoffee, FiChevronLeft, FiChevronRight, FiX, FiEye, FiPackage, FiHeart, FiFilm, FiSun, FiUser, FiCheck, FiShield, FiTv, FiZap, FiWind, FiThermometer, FiAperture, FiCamera, FiMusic, FiVolume2, FiSmartphone, FiMonitor, FiTool, FiBook } from 'react-icons/fi';\nimport { FaSnowflake, FaSkiing, FaHotTub, FaFire, FaParking, FaDumbbell, FaSwimmingPool, FaSpa, FaGamepad, FaBicycle, FaUtensils, FaWineGlass, FaCar, FaLeaf, FaFirstAid, FaBaby, FaPaw } from 'react-icons/fa';\nimport Navbar from '../components/Navbar';\nimport Footer from '../components/Footer';\nimport ChaletMapEmbed from '../components/ChaletMapEmbed';\nimport NewLikeButton from '../components/NewLikeButton'; // Import the new like button\nimport { useAuth } from '../contexts/AuthContext';\nimport '../styles/ChaletDetailPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst formatImageUrl = imagePath => {\n  if (!imagePath) return \"/placeholder.jpg\";\n  if (imagePath.startsWith('http://') || imagePath.startsWith('https://')) {\n    return imagePath;\n  }\n  const cleanPath = imagePath.startsWith('/') ? imagePath.substring(1) : imagePath;\n  return `${process.env.REACT_APP_BASE_URL}/${cleanPath}`;\n};\nconst ChaletDetailPage = () => {\n  _s();\n  var _location$state, _chalet$images2, _chalet$images4;\n  const {\n    slug\n  } = useParams();\n  const location = useLocation();\n  const propertyIdFromState = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.propertyId;\n  const navigate = useNavigate();\n  const contactFormRef = useRef(null);\n\n  // UI State\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [showLightbox, setShowLightbox] = useState(false);\n  const [showLoginPopup, setShowLoginPopup] = useState(false);\n  const [imagesLoaded, setImagesLoaded] = useState(new Set());\n\n  // Data state\n  const [chalet, setChalet] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Like state\n  const [isLiked, setIsLiked] = useState(false);\n  const [isLikeLoading, setIsLikeLoading] = useState(false);\n  const [likesCount, setLikesCount] = useState(0);\n\n  // Contact form state\n  const [contactForm, setContactForm] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    message: ''\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitMessage, setSubmitMessage] = useState('');\n  const [submitStatus, setSubmitStatus] = useState(''); // 'success' or 'error'\n\n  const {\n    isAuthenticated,\n    user\n  } = useAuth();\n\n  // Memoized amenity icon mapping to prevent recreation on every render\n  const amenityIconMap = useMemo(() => ({\n    'Wi-Fi': {\n      icon: /*#__PURE__*/_jsxDEV(FiWifi, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 22\n      }, this),\n      category: 'connectivity'\n    },\n    'WiFi': {\n      icon: /*#__PURE__*/_jsxDEV(FiWifi, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this),\n      category: 'connectivity'\n    },\n    'Internet': {\n      icon: /*#__PURE__*/_jsxDEV(FiWifi, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }, this),\n      category: 'connectivity'\n    },\n    'Air Conditioning': {\n      icon: /*#__PURE__*/_jsxDEV(FiWind, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 33\n      }, this),\n      category: 'comfort'\n    },\n    'Heating': {\n      icon: /*#__PURE__*/_jsxDEV(FiThermometer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 24\n      }, this),\n      category: 'comfort'\n    },\n    'Fireplace': {\n      icon: /*#__PURE__*/_jsxDEV(FaFire, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 26\n      }, this),\n      category: 'comfort'\n    },\n    'Hot Tub': {\n      icon: /*#__PURE__*/_jsxDEV(FaHotTub, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 24\n      }, this),\n      category: 'wellness'\n    },\n    'Sauna': {\n      icon: /*#__PURE__*/_jsxDEV(FaSpa, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 22\n      }, this),\n      category: 'wellness'\n    },\n    'Kitchen': {\n      icon: /*#__PURE__*/_jsxDEV(FiCoffee, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 24\n      }, this),\n      category: 'kitchen'\n    },\n    'Full Kitchen': {\n      icon: /*#__PURE__*/_jsxDEV(FaUtensils, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }, this),\n      category: 'kitchen'\n    },\n    'TV': {\n      icon: /*#__PURE__*/_jsxDEV(FiTv, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }, this),\n      category: 'entertainment'\n    },\n    'Swimming Pool': {\n      icon: /*#__PURE__*/_jsxDEV(FaSwimmingPool, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 30\n      }, this),\n      category: 'recreation'\n    },\n    'Pool': {\n      icon: /*#__PURE__*/_jsxDEV(FaSwimmingPool, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this),\n      category: 'recreation'\n    },\n    'Gym': {\n      icon: /*#__PURE__*/_jsxDEV(FaDumbbell, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 20\n      }, this),\n      category: 'recreation'\n    },\n    'Parking': {\n      icon: /*#__PURE__*/_jsxDEV(FaParking, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 24\n      }, this),\n      category: 'services'\n    },\n    'Pet Friendly': {\n      icon: /*#__PURE__*/_jsxDEV(FaPaw, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }, this),\n      category: 'family'\n    },\n    'Balcony': {\n      icon: /*#__PURE__*/_jsxDEV(FiEye, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 24\n      }, this),\n      category: 'outdoor'\n    },\n    'Terrace': {\n      icon: /*#__PURE__*/_jsxDEV(FiSun, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 24\n      }, this),\n      category: 'outdoor'\n    }\n  }), []);\n\n  // Memoized functions\n  const getFavoritesFromStorage = useCallback(() => {\n    try {\n      const favorites = localStorage.getItem('favorites');\n      return favorites ? JSON.parse(favorites) : [];\n    } catch (e) {\n      return [];\n    }\n  }, []);\n  const checkIfLiked = useCallback(() => {\n    if (!(chalet !== null && chalet !== void 0 && chalet.id) || !isAuthenticated) return false;\n    const favorites = getFavoritesFromStorage();\n    return Array.isArray(favorites) && favorites.includes(chalet.id.toString());\n  }, [chalet === null || chalet === void 0 ? void 0 : chalet.id, isAuthenticated, getFavoritesFromStorage]);\n  const getAmenityWithIcon = useCallback(amenityName => {\n    const exactMatch = amenityIconMap[amenityName];\n    if (exactMatch) return exactMatch;\n    const partialMatch = Object.keys(amenityIconMap).find(key => amenityName.toLowerCase().includes(key.toLowerCase()) || key.toLowerCase().includes(amenityName.toLowerCase()));\n    if (partialMatch) return amenityIconMap[partialMatch];\n    return {\n      icon: /*#__PURE__*/_jsxDEV(FiCheck, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 20\n      }, this),\n      category: 'general'\n    };\n  }, [amenityIconMap]);\n  const getIconComponent = useCallback(iconName => {\n    const iconMap = {\n      'FaSkiing': /*#__PURE__*/_jsxDEV(FaSkiing, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 19\n      }, this),\n      'FaHotTub': /*#__PURE__*/_jsxDEV(FaHotTub, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }, this),\n      'FaFire': /*#__PURE__*/_jsxDEV(FaFire, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this),\n      'FiWifi': /*#__PURE__*/_jsxDEV(FiWifi, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this),\n      'FiCoffee': /*#__PURE__*/_jsxDEV(FiCoffee, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }, this),\n      'FaParking': /*#__PURE__*/_jsxDEV(FaParking, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 20\n      }, this),\n      'FaSnowflake': /*#__PURE__*/_jsxDEV(FaSnowflake, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 22\n      }, this),\n      'FiUsers': /*#__PURE__*/_jsxDEV(FiUsers, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 18\n      }, this),\n      'FiEye': /*#__PURE__*/_jsxDEV(FiEye, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 16\n      }, this),\n      'FiPackage': /*#__PURE__*/_jsxDEV(FiPackage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 20\n      }, this)\n    };\n    return iconMap[iconName] || /*#__PURE__*/_jsxDEV(FiCheck, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }, this);\n  }, []);\n\n  // Contact form handlers\n  const handleContactFormChange = useCallback(e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setContactForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  }, []);\n  const handleContactFormSubmit = useCallback(async e => {\n    e.preventDefault();\n\n    // Basic validation\n    if (!contactForm.name.trim() || !contactForm.email.trim() || !contactForm.message.trim()) {\n      setSubmitMessage('Please fill in all required fields.');\n      setSubmitStatus('error');\n      return;\n    }\n\n    // Email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(contactForm.email)) {\n      setSubmitMessage('Please enter a valid email address.');\n      setSubmitStatus('error');\n      return;\n    }\n    setIsSubmitting(true);\n    setSubmitMessage('');\n    setSubmitStatus('');\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/contact_form.php`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          name: contactForm.name.trim(),\n          email: contactForm.email.trim(),\n          phone: contactForm.phone.trim(),\n          message: contactForm.message.trim(),\n          propertyTitle: (chalet === null || chalet === void 0 ? void 0 : chalet.title) || '',\n          propertyId: (chalet === null || chalet === void 0 ? void 0 : chalet.id) || null\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        setSubmitMessage(data.message);\n        setSubmitStatus('success');\n        // Reset form\n        setContactForm({\n          name: '',\n          email: '',\n          phone: '',\n          message: ''\n        });\n      } else {\n        setSubmitMessage(data.message || 'Failed to send message. Please try again.');\n        setSubmitStatus('error');\n      }\n    } catch (error) {\n      console.error('Contact form error:', error);\n      setSubmitMessage('Network error. Please check your connection and try again.');\n      setSubmitStatus('error');\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [contactForm, chalet]);\n\n  // Optimized handlers\n  const closeLoginPopup = useCallback(() => setShowLoginPopup(false), []);\n  const handleLoginRedirect = useCallback(() => window.location.href = '/login', []);\n  const scrollToContactForm = useCallback(() => {\n    var _contactFormRef$curre;\n    (_contactFormRef$curre = contactFormRef.current) === null || _contactFormRef$curre === void 0 ? void 0 : _contactFormRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, []);\n  const nextImage = useCallback(() => {\n    var _chalet$images;\n    if (!(chalet !== null && chalet !== void 0 && (_chalet$images = chalet.images) !== null && _chalet$images !== void 0 && _chalet$images.length)) return;\n    setCurrentImageIndex(prev => prev === chalet.images.length - 1 ? 0 : prev + 1);\n  }, [chalet === null || chalet === void 0 ? void 0 : (_chalet$images2 = chalet.images) === null || _chalet$images2 === void 0 ? void 0 : _chalet$images2.length]);\n  const prevImage = useCallback(() => {\n    var _chalet$images3;\n    if (!(chalet !== null && chalet !== void 0 && (_chalet$images3 = chalet.images) !== null && _chalet$images3 !== void 0 && _chalet$images3.length)) return;\n    setCurrentImageIndex(prev => prev === 0 ? chalet.images.length - 1 : prev - 1);\n  }, [chalet === null || chalet === void 0 ? void 0 : (_chalet$images4 = chalet.images) === null || _chalet$images4 === void 0 ? void 0 : _chalet$images4.length]);\n  const openLightbox = useCallback(index => {\n    setCurrentImageIndex(index);\n    setShowLightbox(true);\n  }, []);\n  const closeLightbox = useCallback(() => setShowLightbox(false), []);\n  const handleBackToListings = useCallback(() => navigate('/'), [navigate]);\n  const createSlug = useCallback(title => {\n    if (!title) return '';\n    return title.toLowerCase().replace(/[^\\w\\s-]/g, '').replace(/\\s+/g, '-');\n  }, []);\n\n  // NEW: Optimized like handler for the new button\n  const handleLikeClick = useCallback(async () => {\n    if (!(chalet !== null && chalet !== void 0 && chalet.id) || isLikeLoading) return;\n    if (!isAuthenticated || !user) {\n      setShowLoginPopup(true);\n      return;\n    }\n    setIsLikeLoading(true);\n    const newLikedState = !isLiked;\n\n    // Optimistic UI update\n    setIsLiked(newLikedState);\n    setLikesCount(prev => newLikedState ? prev + 1 : Math.max(0, prev - 1));\n\n    // Update localStorage\n    let favorites = getFavoritesFromStorage();\n    if (newLikedState) {\n      if (!favorites.includes(chalet.id.toString())) {\n        favorites.push(chalet.id.toString());\n      }\n    } else {\n      favorites = favorites.filter(favId => favId !== chalet.id.toString());\n    }\n    localStorage.setItem('favorites', JSON.stringify(favorites));\n\n    // Notify other components\n    window.dispatchEvent(new CustomEvent('favoritesChanged', {\n      detail: {\n        chaletId: chalet.id.toString(),\n        isLiked: newLikedState\n      }\n    }));\n    try {\n      const apiUrl = newLikedState ? `${process.env.REACT_APP_API_BASE_URL}/add_to_favorites.php` : `${process.env.REACT_APP_API_BASE_URL}/remove_from_favorites.php`;\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          chaletId: chalet.id\n        })\n      });\n      const data = await response.json();\n      if (!data.success) {\n        if (data.message === 'User not logged in') {\n          setShowLoginPopup(true);\n        }\n        // Revert optimistic update\n        setIsLiked(!newLikedState);\n        setLikesCount(prev => newLikedState ? prev - 1 : prev + 1);\n      }\n    } catch (error) {\n      // Revert on error\n      setIsLiked(!newLikedState);\n      setLikesCount(prev => newLikedState ? prev - 1 : prev + 1);\n    } finally {\n      setIsLikeLoading(false);\n    }\n  }, [chalet === null || chalet === void 0 ? void 0 : chalet.id, isLiked, isLikeLoading, isAuthenticated, user, getFavoritesFromStorage]);\n\n  // Memoized display values\n  const displayValues = useMemo(() => {\n    if (!chalet) return {};\n    return {\n      price: chalet.price ? typeof chalet.price === 'string' && chalet.price.includes('₣') ? chalet.price : `₣ ${Number(chalet.price).toLocaleString()}` : 'Price on request',\n      sqft: chalet.sqft ? chalet.sqft.toLocaleString() : 'N/A',\n      beds: chalet.beds || 1,\n      baths: chalet.baths || 1,\n      availability: chalet.availability || 'Contact for details',\n      type: chalet.type || 'Chalet',\n      yearBuilt: chalet.yearBuilt || 'N/A',\n      floors: chalet.floors || '1'\n    };\n  }, [chalet]);\n\n  // Memoized grouped amenities\n  const groupedAmenities = useMemo(() => {\n    var _chalet$amenities;\n    if (!(chalet !== null && chalet !== void 0 && (_chalet$amenities = chalet.amenities) !== null && _chalet$amenities !== void 0 && _chalet$amenities.length)) return {};\n    const categoryNames = {\n      'connectivity': 'Connectivity',\n      'comfort': 'Comfort & Climate',\n      'kitchen': 'Kitchen & Dining',\n      'entertainment': 'Entertainment',\n      'recreation': 'Recreation',\n      'outdoor': 'Outdoor Spaces',\n      'services': 'Services',\n      'wellness': 'Wellness & Spa',\n      'family': 'Family & Pets',\n      'general': 'General Amenities'\n    };\n    const grouped = chalet.amenities.reduce((acc, amenity) => {\n      const category = amenity.category || 'general';\n      if (!acc[category]) acc[category] = [];\n      acc[category].push(amenity);\n      return acc;\n    }, {});\n    const categoryOrder = ['comfort', 'kitchen', 'entertainment', 'recreation', 'wellness', 'outdoor', 'connectivity', 'services', 'family', 'general'];\n    const sortedGrouped = {};\n    categoryOrder.forEach(category => {\n      if (grouped[category]) {\n        sortedGrouped[categoryNames[category]] = grouped[category];\n      }\n    });\n    return sortedGrouped;\n  }, [chalet === null || chalet === void 0 ? void 0 : chalet.amenities]);\n\n  // Effects\n  useEffect(() => {\n    if (chalet) {\n      setLikesCount(chalet.likes_count || 0);\n      setIsLiked(checkIfLiked());\n    }\n  }, [chalet, checkIfLiked]);\n\n  // Initialize contact form message when chalet loads\n  useEffect(() => {\n    if (chalet && !contactForm.message) {\n      setContactForm(prev => ({\n        ...prev,\n        message: `I'm interested in ${chalet.title}. Please provide more information about availability and pricing.`\n      }));\n    }\n  }, [chalet, contactForm.message]);\n\n  // Optimized server sync\n  useEffect(() => {\n    if (!(chalet !== null && chalet !== void 0 && chalet.id) || !isAuthenticated) return;\n    const syncTimer = setTimeout(async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/check_is_favorite.php`, {\n          method: 'POST',\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            chaletId: chalet.id\n          })\n        });\n        const data = await response.json();\n        if (data.success && data.isFavorite !== isLiked) {\n          setIsLiked(data.isFavorite);\n          // Update localStorage to match server\n          const favorites = getFavoritesFromStorage();\n          if (data.isFavorite && !favorites.includes(chalet.id.toString())) {\n            localStorage.setItem('favorites', JSON.stringify([...favorites, chalet.id.toString()]));\n          } else if (!data.isFavorite && favorites.includes(chalet.id.toString())) {\n            localStorage.setItem('favorites', JSON.stringify(favorites.filter(favId => favId !== chalet.id.toString())));\n          }\n        }\n      } catch (err) {\n        // Silently fail\n      }\n    }, 1000); // Delay to reduce initial load impact\n\n    return () => clearTimeout(syncTimer);\n  }, [chalet === null || chalet === void 0 ? void 0 : chalet.id, isAuthenticated, isLiked, getFavoritesFromStorage]);\n\n  // Data fetching\n  useEffect(() => {\n    const fetchChaletData = async () => {\n      try {\n        setLoading(true);\n        let apiUrl;\n        if (propertyIdFromState) {\n          apiUrl = `${process.env.REACT_APP_API_BASE_URL}/get_chalet.php?id=${propertyIdFromState}`;\n        } else {\n          apiUrl = `${process.env.REACT_APP_API_BASE_URL}/get_chalet_by_slug.php?slug=${slug}`;\n        }\n        const response = await fetch(apiUrl, {\n          method: 'GET',\n          mode: 'cors',\n          headers: {\n            'Accept': 'application/json'\n          }\n        });\n        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\n        const data = await response.json();\n\n        // Process images\n        if (data.images && Array.isArray(data.images)) {\n          data.images = data.images.map(img => formatImageUrl(img));\n        } else if (data.main_image) {\n          data.images = [formatImageUrl(data.main_image)];\n        } else {\n          data.images = [\"/placeholder.jpg\"];\n        }\n\n        // Process features\n        if (data.features) {\n          data.features = data.features.map(feature => ({\n            ...feature,\n            iconComponent: getIconComponent(feature.icon)\n          }));\n        } else {\n          data.features = [];\n        }\n\n        // Process amenities\n        if (data.amenities) {\n          if (typeof data.amenities === 'string') {\n            data.amenities = data.amenities.split(',').map(item => item.trim());\n          }\n          data.amenities = data.amenities.map(amenity => {\n            const amenityData = getAmenityWithIcon(amenity);\n            return {\n              name: amenity,\n              icon: amenityData.icon,\n              category: amenityData.category\n            };\n          });\n        } else {\n          data.amenities = [];\n        }\n        setChalet(data);\n      } catch (err) {\n        setError(`Error loading chalet details: ${err.message}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchChaletData();\n  }, [slug, propertyIdFromState, getIconComponent, getAmenityWithIcon]);\n\n  // Handle image loading\n  const handleImageLoad = useCallback(index => {\n    setImagesLoaded(prev => new Set([...prev, index]));\n  }, []);\n\n  // Slug correction\n  useEffect(() => {\n    if (chalet && chalet.title) {\n      const correctSlug = createSlug(chalet.title);\n      if (slug !== correctSlug) {\n        navigate(`/chalet/${correctSlug}`, {\n          replace: true,\n          state: {\n            propertyId: chalet.id\n          }\n        });\n      }\n    }\n  }, [chalet, navigate, slug, createSlug]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chalet-detail-page\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: \"Loading chalet details...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !chalet) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chalet-detail-page\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: handleBackToListings,\n          children: \"Back to Listings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 7\n    }, this);\n  }\n  if (!chalet) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chalet-detail-page\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Chalet not found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: handleBackToListings,\n          children: \"Back to Listings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chalet-detail-page\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"chalet-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chalet-gallery\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-image\",\n          children: [!imagesLoaded.has(currentImageIndex) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-placeholder\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: chalet.images[currentImageIndex],\n            alt: chalet.title,\n            onClick: () => openLightbox(currentImageIndex),\n            onLoad: () => handleImageLoad(currentImageIndex),\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/placeholder.jpg\";\n              handleImageLoad(currentImageIndex);\n            },\n            style: {\n              opacity: imagesLoaded.has(currentImageIndex) ? 1 : 0\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"nav-button left\",\n            onClick: prevImage,\n            children: /*#__PURE__*/_jsxDEV(FiChevronLeft, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"nav-button right\",\n            onClick: nextImage,\n            children: /*#__PURE__*/_jsxDEV(FiChevronRight, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"thumbnail-grid\",\n          children: [chalet.images.slice(0, 3).map((img, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `thumbnail ${index === currentImageIndex ? 'active' : ''}`,\n            onClick: () => setCurrentImageIndex(index),\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: img,\n              alt: `${chalet.title} ${index + 1}`,\n              onClick: () => openLightbox(index),\n              loading: \"lazy\",\n              onError: e => {\n                e.target.onerror = null;\n                e.target.src = \"/placeholder.jpg\";\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 15\n          }, this)), chalet.images.length > 4 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thumbnail more-images\",\n            onClick: () => openLightbox(4),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"more-count\",\n              children: [\"+\", chalet.images.length - 4]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: chalet.images[4],\n              alt: \"More images\",\n              loading: \"lazy\",\n              onError: e => {\n                e.target.onerror = null;\n                e.target.src = \"/placeholder.jpg\";\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 9\n      }, this), showLightbox && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lightbox\",\n        onClick: closeLightbox,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lightbox-content\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: closeLightbox,\n            children: /*#__PURE__*/_jsxDEV(FiX, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: chalet.images[currentImageIndex],\n            alt: chalet.title,\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/placeholder.jpg\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"nav-button left\",\n            onClick: e => {\n              e.stopPropagation();\n              prevImage();\n            },\n            children: /*#__PURE__*/_jsxDEV(FiChevronLeft, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"nav-button right\",\n            onClick: e => {\n              e.stopPropagation();\n              nextImage();\n            },\n            children: /*#__PURE__*/_jsxDEV(FiChevronRight, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-counter\",\n            children: [currentImageIndex + 1, \" / \", chalet.images.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chalet-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chalet-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'flex-start'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: chalet.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(NewLikeButton, {\n              isLiked: isLiked,\n              isLoading: isLikeLoading,\n              onClick: handleLikeClick,\n              disabled: isLikeLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chalet-badges\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"location\",\n              children: [/*#__PURE__*/_jsxDEV(FiMapPin, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 17\n              }, this), \" \", chalet.city, \", \", chalet.canton || 'Switzerland']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating\",\n              children: [/*#__PURE__*/_jsxDEV(FiHeart, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 650,\n                columnNumber: 17\n              }, this), likesCount, \" \", likesCount === 1 ? 'like' : 'likes']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 649,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"main-price\",\n              children: displayValues.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `status ${chalet.status ? chalet.status.toLowerCase() : 'available'}`,\n            children: chalet.status || 'Available'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quick-facts\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fact\",\n            children: [/*#__PURE__*/_jsxDEV(FiHome, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 15\n            }, this), \" \", displayValues.beds, \" bedrooms\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fact\",\n            children: [/*#__PURE__*/_jsxDEV(FiDroplet, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 15\n            }, this), \" \", displayValues.baths, \" bathrooms\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fact\",\n            children: [/*#__PURE__*/_jsxDEV(FiLayers, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this), \" \", displayValues.sqft, \" sqft\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fact\",\n            children: [/*#__PURE__*/_jsxDEV(FiUsers, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 15\n            }, this), \" Sleeps \", displayValues.beds * 2]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fact\",\n            children: [/*#__PURE__*/_jsxDEV(FiCalendar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 15\n            }, this), \" \", displayValues.availability]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"description-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"About this chalet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: chalet.description || 'Detailed description coming soon.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 11\n        }, this), chalet.features.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"features-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Chalet Features\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"features-grid\",\n            children: chalet.features.map((feature, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"feature\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"feature-icon\",\n                children: feature.iconComponent\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: feature.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 695,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this), chalet.amenities.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"amenities-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Amenities & Services\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amenities-grid\",\n            children: chalet.amenities.map((amenity, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"amenity-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"amenity-icon\",\n                children: amenity.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 708,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"amenity-name\",\n                children: amenity.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 711,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"location-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ChaletMapEmbed, {\n            chalet: chalet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contact-section\",\n          ref: contactFormRef,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Contact for more information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 13\n          }, this), submitMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `submit-message ${submitStatus}`,\n            children: submitMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"contact-form\",\n            onSubmit: handleContactFormSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                children: \"Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 734,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"name\",\n                name: \"name\",\n                value: contactForm.name,\n                onChange: handleContactFormChange,\n                required: true,\n                disabled: isSubmitting,\n                placeholder: \"Your full name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"Email *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                id: \"email\",\n                name: \"email\",\n                value: contactForm.email,\n                onChange: handleContactFormChange,\n                required: true,\n                disabled: isSubmitting,\n                placeholder: \"your.email@example.com\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"phone\",\n                children: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                id: \"phone\",\n                name: \"phone\",\n                value: contactForm.phone,\n                onChange: handleContactFormChange,\n                disabled: isSubmitting,\n                placeholder: \"+41 XX XXX XX XX\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"message\",\n                children: \"Message *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                id: \"message\",\n                name: \"message\",\n                rows: \"4\",\n                value: contactForm.message,\n                onChange: handleContactFormChange,\n                required: true,\n                disabled: isSubmitting,\n                placeholder: `I'm interested in ${(chalet === null || chalet === void 0 ? void 0 : chalet.title) || 'this property'}. Please provide more information about availability and pricing.`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"submit-btn\",\n              disabled: isSubmitting,\n              children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 795,\n                  columnNumber: 21\n                }, this), \"Sending...\"]\n              }, void 0, true) : 'Send Inquiry'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 788,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"booking-sidebar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"booking-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Make an Inquiry\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-display\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"main-price\",\n              children: displayValues.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 810,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"availability\",\n            children: [/*#__PURE__*/_jsxDEV(FiCalendar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 814,\n              columnNumber: 15\n            }, this), \" Available: \", displayValues.availability]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 813,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"likes-info\",\n            children: [/*#__PURE__*/_jsxDEV(FiHeart, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 15\n            }, this), \" \", likesCount, \" \", likesCount === 1 ? 'person likes' : 'people like', \" this chalet\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 817,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"book-now-btn\",\n            onClick: scrollToContactForm,\n            children: \"Book Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 821,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"contact-btn\",\n            onClick: scrollToContactForm,\n            children: \"Contact Agent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 825,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"property-facts\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fact\",\n              children: [/*#__PURE__*/_jsxDEV(FiHome, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 831,\n                columnNumber: 17\n              }, this), \" \", displayValues.type]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fact\",\n              children: [/*#__PURE__*/_jsxDEV(FiUsers, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 834,\n                columnNumber: 17\n              }, this), \" Sleeps \", displayValues.beds * 2]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 833,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fact\",\n              children: [/*#__PURE__*/_jsxDEV(FiLayers, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 837,\n                columnNumber: 17\n              }, this), \" \", displayValues.sqft, \" sqft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fact\",\n              children: [\"Built in \", displayValues.yearBuilt]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 839,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fact\",\n              children: [displayValues.floors, \" floors\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 829,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 807,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 9\n      }, this), showLoginPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-popup-overlay\",\n        onClick: closeLoginPopup,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-popup\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-popup-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Login Required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"close-popup\",\n              onClick: closeLoginPopup,\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 854,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-popup-content\",\n            children: [/*#__PURE__*/_jsxDEV(FiHeart, {\n              className: \"popup-heart-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"You need to be logged in to add chalets to your favorites.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 858,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"login-popup-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"login-btn\",\n                onClick: handleLoginRedirect,\n                children: \"Login Now\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"cancel-btn\",\n                onClick: closeLoginPopup,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 861,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 859,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 869,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 537,\n    columnNumber: 5\n  }, this);\n};\n_s(ChaletDetailPage, \"OPaen5UfZnLOKoRa6EVl58PRRuw=\", false, function () {\n  return [useParams, useLocation, useNavigate, useAuth];\n});\n_c = ChaletDetailPage;\nexport default ChaletDetailPage;\nvar _c;\n$RefreshReg$(_c, \"ChaletDetailPage\");","map":{"version":3,"names":["React","useRef","useState","useEffect","useCallback","useMemo","useParams","useNavigate","useLocation","FiMapPin","FiHome","FiLayers","FiDroplet","FiUsers","FiCalendar","FiStar","FiWifi","FiCoffee","FiChevronLeft","FiChevronRight","FiX","FiEye","FiPackage","FiHeart","FiFilm","FiSun","FiUser","FiCheck","FiShield","FiTv","FiZap","FiWind","FiThermometer","FiAperture","FiCamera","FiMusic","FiVolume2","FiSmartphone","FiMonitor","FiTool","FiBook","FaSnowflake","FaSkiing","FaHotTub","FaFire","FaParking","FaDumbbell","FaSwimmingPool","FaSpa","FaGamepad","FaBicycle","FaUtensils","FaWineGlass","FaCar","FaLeaf","FaFirstAid","FaBaby","FaPaw","Navbar","Footer","ChaletMapEmbed","NewLikeButton","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","formatImageUrl","imagePath","startsWith","cleanPath","substring","process","env","REACT_APP_BASE_URL","ChaletDetailPage","_s","_location$state","_chalet$images2","_chalet$images4","slug","location","propertyIdFromState","state","propertyId","navigate","contactFormRef","currentImageIndex","setCurrentImageIndex","showLightbox","setShowLightbox","showLoginPopup","setShowLoginPopup","imagesLoaded","setImagesLoaded","Set","chalet","setChalet","loading","setLoading","error","setError","isLiked","setIsLiked","isLikeLoading","setIsLikeLoading","likesCount","setLikesCount","contactForm","setContactForm","name","email","phone","message","isSubmitting","setIsSubmitting","submitMessage","setSubmitMessage","submitStatus","setSubmitStatus","isAuthenticated","user","amenityIconMap","icon","fileName","_jsxFileName","lineNumber","columnNumber","category","getFavoritesFromStorage","favorites","localStorage","getItem","JSON","parse","e","checkIfLiked","id","Array","isArray","includes","toString","getAmenityWithIcon","amenityName","exactMatch","partialMatch","Object","keys","find","key","toLowerCase","getIconComponent","iconName","iconMap","handleContactFormChange","value","target","prev","handleContactFormSubmit","preventDefault","trim","emailRegex","test","response","fetch","REACT_APP_API_BASE_URL","method","headers","body","stringify","propertyTitle","title","data","json","success","console","closeLoginPopup","handleLoginRedirect","window","href","scrollToContactForm","_contactFormRef$curre","current","scrollIntoView","behavior","nextImage","_chalet$images","images","length","prevImage","_chalet$images3","openLightbox","index","closeLightbox","handleBackToListings","createSlug","replace","handleLikeClick","newLikedState","Math","max","push","filter","favId","setItem","dispatchEvent","CustomEvent","detail","chaletId","apiUrl","credentials","displayValues","price","Number","toLocaleString","sqft","beds","baths","availability","type","yearBuilt","floors","groupedAmenities","_chalet$amenities","amenities","categoryNames","grouped","reduce","acc","amenity","categoryOrder","sortedGrouped","forEach","likes_count","syncTimer","setTimeout","isFavorite","err","clearTimeout","fetchChaletData","mode","ok","Error","status","map","img","main_image","features","feature","iconComponent","split","item","amenityData","handleImageLoad","correctSlug","className","children","onClick","has","src","alt","onLoad","onError","onerror","style","opacity","slice","stopPropagation","display","justifyContent","alignItems","flex","isLoading","disabled","city","canton","description","ref","onSubmit","htmlFor","onChange","required","placeholder","rows","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/real_estate_project/src/pages/ChaletDetailPage.js"],"sourcesContent":["import React, { useRef, useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { \r\n  FiMapPin, FiHome, FiLayers, FiDroplet, FiUsers, FiCalendar, \r\n  FiStar, FiWifi, FiCoffee, FiChevronLeft, FiChevronRight, \r\n  FiX, FiEye, FiPackage, FiHeart, FiFilm, \r\n  FiSun, FiUser, FiCheck, FiShield, FiTv,\r\n  FiZap, FiWind, FiThermometer, FiAperture, FiCamera,\r\n  FiMusic, FiVolume2, FiSmartphone, FiMonitor, FiTool,\r\n  FiBook\r\n} from 'react-icons/fi';\r\nimport { \r\n  FaSnowflake, FaSkiing, FaHotTub, FaFire, FaParking,\r\n  FaDumbbell, FaSwimmingPool, FaSpa, FaGamepad,\r\n  FaBicycle, FaUtensils, FaWineGlass, FaCar,\r\n  FaLeaf, FaFirstAid, FaBaby, FaPaw\r\n} from 'react-icons/fa';\r\nimport Navbar from '../components/Navbar';\r\nimport Footer from '../components/Footer';\r\nimport ChaletMapEmbed from '../components/ChaletMapEmbed';\r\nimport NewLikeButton from '../components/NewLikeButton'; // Import the new like button\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport '../styles/ChaletDetailPage.css';\r\n\r\nconst formatImageUrl = (imagePath) => {\r\n  if (!imagePath) return \"/placeholder.jpg\";\r\n  if (imagePath.startsWith('http://') || imagePath.startsWith('https://')) {\r\n    return imagePath;\r\n  }\r\n  const cleanPath = imagePath.startsWith('/') ? imagePath.substring(1) : imagePath;\r\n  return `${process.env.REACT_APP_BASE_URL}/${cleanPath}`;\r\n};\r\n\r\nconst ChaletDetailPage = () => {\r\n  const { slug } = useParams();\r\n  const location = useLocation();\r\n  const propertyIdFromState = location.state?.propertyId;\r\n  const navigate = useNavigate();\r\n  const contactFormRef = useRef(null);\r\n  \r\n  // UI State\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [showLightbox, setShowLightbox] = useState(false);\r\n  const [showLoginPopup, setShowLoginPopup] = useState(false);\r\n  const [imagesLoaded, setImagesLoaded] = useState(new Set());\r\n  \r\n  // Data state\r\n  const [chalet, setChalet] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Like state\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [isLikeLoading, setIsLikeLoading] = useState(false);\r\n  const [likesCount, setLikesCount] = useState(0);\r\n  \r\n  // Contact form state\r\n  const [contactForm, setContactForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    phone: '',\r\n    message: ''\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [submitMessage, setSubmitMessage] = useState('');\r\n  const [submitStatus, setSubmitStatus] = useState(''); // 'success' or 'error'\r\n  \r\n  const { isAuthenticated, user } = useAuth();\r\n\r\n  // Memoized amenity icon mapping to prevent recreation on every render\r\n  const amenityIconMap = useMemo(() => ({\r\n    'Wi-Fi': { icon: <FiWifi />, category: 'connectivity' },\r\n    'WiFi': { icon: <FiWifi />, category: 'connectivity' },\r\n    'Internet': { icon: <FiWifi />, category: 'connectivity' },\r\n    'Air Conditioning': { icon: <FiWind />, category: 'comfort' },\r\n    'Heating': { icon: <FiThermometer />, category: 'comfort' },\r\n    'Fireplace': { icon: <FaFire />, category: 'comfort' },\r\n    'Hot Tub': { icon: <FaHotTub />, category: 'wellness' },\r\n    'Sauna': { icon: <FaSpa />, category: 'wellness' },\r\n    'Kitchen': { icon: <FiCoffee />, category: 'kitchen' },\r\n    'Full Kitchen': { icon: <FaUtensils />, category: 'kitchen' },\r\n    'TV': { icon: <FiTv />, category: 'entertainment' },\r\n    'Swimming Pool': { icon: <FaSwimmingPool />, category: 'recreation' },\r\n    'Pool': { icon: <FaSwimmingPool />, category: 'recreation' },\r\n    'Gym': { icon: <FaDumbbell />, category: 'recreation' },\r\n    'Parking': { icon: <FaParking />, category: 'services' },\r\n    'Pet Friendly': { icon: <FaPaw />, category: 'family' },\r\n    'Balcony': { icon: <FiEye />, category: 'outdoor' },\r\n    'Terrace': { icon: <FiSun />, category: 'outdoor' }\r\n  }), []);\r\n\r\n  // Memoized functions\r\n  const getFavoritesFromStorage = useCallback(() => {\r\n    try {\r\n      const favorites = localStorage.getItem('favorites');\r\n      return favorites ? JSON.parse(favorites) : [];\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  }, []);\r\n\r\n  const checkIfLiked = useCallback(() => {\r\n    if (!chalet?.id || !isAuthenticated) return false;\r\n    const favorites = getFavoritesFromStorage();\r\n    return Array.isArray(favorites) && favorites.includes(chalet.id.toString());\r\n  }, [chalet?.id, isAuthenticated, getFavoritesFromStorage]);\r\n\r\n  const getAmenityWithIcon = useCallback((amenityName) => {\r\n    const exactMatch = amenityIconMap[amenityName];\r\n    if (exactMatch) return exactMatch;\r\n    \r\n    const partialMatch = Object.keys(amenityIconMap).find(key => \r\n      amenityName.toLowerCase().includes(key.toLowerCase()) || \r\n      key.toLowerCase().includes(amenityName.toLowerCase())\r\n    );\r\n    \r\n    if (partialMatch) return amenityIconMap[partialMatch];\r\n    return { icon: <FiCheck />, category: 'general' };\r\n  }, [amenityIconMap]);\r\n\r\n  const getIconComponent = useCallback((iconName) => {\r\n    const iconMap = {\r\n      'FaSkiing': <FaSkiing />,\r\n      'FaHotTub': <FaHotTub />,\r\n      'FaFire': <FaFire />,\r\n      'FiWifi': <FiWifi />,\r\n      'FiCoffee': <FiCoffee />,\r\n      'FaParking': <FaParking />,\r\n      'FaSnowflake': <FaSnowflake />,\r\n      'FiUsers': <FiUsers />,\r\n      'FiEye': <FiEye />,\r\n      'FiPackage': <FiPackage />\r\n    };\r\n    return iconMap[iconName] || <FiCheck />;\r\n  }, []);\r\n\r\n  // Contact form handlers\r\n  const handleContactFormChange = useCallback((e) => {\r\n    const { name, value } = e.target;\r\n    setContactForm(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  }, []);\r\n\r\n  const handleContactFormSubmit = useCallback(async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Basic validation\r\n    if (!contactForm.name.trim() || !contactForm.email.trim() || !contactForm.message.trim()) {\r\n      setSubmitMessage('Please fill in all required fields.');\r\n      setSubmitStatus('error');\r\n      return;\r\n    }\r\n\r\n    // Email validation\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(contactForm.email)) {\r\n      setSubmitMessage('Please enter a valid email address.');\r\n      setSubmitStatus('error');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setSubmitMessage('');\r\n    setSubmitStatus('');\r\n\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/contact_form.php`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: contactForm.name.trim(),\r\n          email: contactForm.email.trim(),\r\n          phone: contactForm.phone.trim(),\r\n          message: contactForm.message.trim(),\r\n          propertyTitle: chalet?.title || '',\r\n          propertyId: chalet?.id || null\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setSubmitMessage(data.message);\r\n        setSubmitStatus('success');\r\n        // Reset form\r\n        setContactForm({\r\n          name: '',\r\n          email: '',\r\n          phone: '',\r\n          message: ''\r\n        });\r\n      } else {\r\n        setSubmitMessage(data.message || 'Failed to send message. Please try again.');\r\n        setSubmitStatus('error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Contact form error:', error);\r\n      setSubmitMessage('Network error. Please check your connection and try again.');\r\n      setSubmitStatus('error');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [contactForm, chalet]);\r\n\r\n  // Optimized handlers\r\n  const closeLoginPopup = useCallback(() => setShowLoginPopup(false), []);\r\n  const handleLoginRedirect = useCallback(() => window.location.href = '/login', []);\r\n  const scrollToContactForm = useCallback(() => {\r\n    contactFormRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, []);\r\n\r\n  const nextImage = useCallback(() => {\r\n    if (!chalet?.images?.length) return;\r\n    setCurrentImageIndex(prev => prev === chalet.images.length - 1 ? 0 : prev + 1);\r\n  }, [chalet?.images?.length]);\r\n\r\n  const prevImage = useCallback(() => {\r\n    if (!chalet?.images?.length) return;\r\n    setCurrentImageIndex(prev => prev === 0 ? chalet.images.length - 1 : prev - 1);\r\n  }, [chalet?.images?.length]);\r\n\r\n  const openLightbox = useCallback((index) => {\r\n    setCurrentImageIndex(index);\r\n    setShowLightbox(true);\r\n  }, []);\r\n\r\n  const closeLightbox = useCallback(() => setShowLightbox(false), []);\r\n\r\n  const handleBackToListings = useCallback(() => navigate('/'), [navigate]);\r\n\r\n  const createSlug = useCallback((title) => {\r\n    if (!title) return '';\r\n    return title.toLowerCase()\r\n      .replace(/[^\\w\\s-]/g, '')\r\n      .replace(/\\s+/g, '-');\r\n  }, []);\r\n\r\n  // NEW: Optimized like handler for the new button\r\n  const handleLikeClick = useCallback(async () => {\r\n    if (!chalet?.id || isLikeLoading) return;\r\n    \r\n    if (!isAuthenticated || !user) {\r\n      setShowLoginPopup(true);\r\n      return;\r\n    }\r\n    \r\n    setIsLikeLoading(true);\r\n    const newLikedState = !isLiked;\r\n    \r\n    // Optimistic UI update\r\n    setIsLiked(newLikedState);\r\n    setLikesCount(prev => newLikedState ? prev + 1 : Math.max(0, prev - 1));\r\n    \r\n    // Update localStorage\r\n    let favorites = getFavoritesFromStorage();\r\n    if (newLikedState) {\r\n      if (!favorites.includes(chalet.id.toString())) {\r\n        favorites.push(chalet.id.toString());\r\n      }\r\n    } else {\r\n      favorites = favorites.filter(favId => favId !== chalet.id.toString());\r\n    }\r\n    localStorage.setItem('favorites', JSON.stringify(favorites));\r\n    \r\n    // Notify other components\r\n    window.dispatchEvent(new CustomEvent('favoritesChanged', {\r\n      detail: { chaletId: chalet.id.toString(), isLiked: newLikedState }\r\n    }));\r\n    \r\n    try {\r\n      const apiUrl = newLikedState \r\n        ? `${process.env.REACT_APP_API_BASE_URL}/add_to_favorites.php` \r\n        : `${process.env.REACT_APP_API_BASE_URL}/remove_from_favorites.php`;\r\n      \r\n      const response = await fetch(apiUrl, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ chaletId: chalet.id }),\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (!data.success) {\r\n        if (data.message === 'User not logged in') {\r\n          setShowLoginPopup(true);\r\n        }\r\n        // Revert optimistic update\r\n        setIsLiked(!newLikedState);\r\n        setLikesCount(prev => newLikedState ? prev - 1 : prev + 1);\r\n      }\r\n    } catch (error) {\r\n      // Revert on error\r\n      setIsLiked(!newLikedState);\r\n      setLikesCount(prev => newLikedState ? prev - 1 : prev + 1);\r\n    } finally {\r\n      setIsLikeLoading(false);\r\n    }\r\n  }, [chalet?.id, isLiked, isLikeLoading, isAuthenticated, user, getFavoritesFromStorage]);\r\n\r\n  // Memoized display values\r\n  const displayValues = useMemo(() => {\r\n    if (!chalet) return {};\r\n    \r\n    return {\r\n      price: chalet.price ? \r\n        (typeof chalet.price === 'string' && chalet.price.includes('₣') ? \r\n          chalet.price : `₣ ${Number(chalet.price).toLocaleString()}`) : \r\n        'Price on request',\r\n      sqft: chalet.sqft ? chalet.sqft.toLocaleString() : 'N/A',\r\n      beds: chalet.beds || 1,\r\n      baths: chalet.baths || 1,\r\n      availability: chalet.availability || 'Contact for details',\r\n      type: chalet.type || 'Chalet',\r\n      yearBuilt: chalet.yearBuilt || 'N/A',\r\n      floors: chalet.floors || '1'\r\n    };\r\n  }, [chalet]);\r\n\r\n  // Memoized grouped amenities\r\n  const groupedAmenities = useMemo(() => {\r\n    if (!chalet?.amenities?.length) return {};\r\n    \r\n    const categoryNames = {\r\n      'connectivity': 'Connectivity',\r\n      'comfort': 'Comfort & Climate',\r\n      'kitchen': 'Kitchen & Dining',\r\n      'entertainment': 'Entertainment',\r\n      'recreation': 'Recreation',\r\n      'outdoor': 'Outdoor Spaces',\r\n      'services': 'Services',\r\n      'wellness': 'Wellness & Spa',\r\n      'family': 'Family & Pets',\r\n      'general': 'General Amenities'\r\n    };\r\n\r\n    const grouped = chalet.amenities.reduce((acc, amenity) => {\r\n      const category = amenity.category || 'general';\r\n      if (!acc[category]) acc[category] = [];\r\n      acc[category].push(amenity);\r\n      return acc;\r\n    }, {});\r\n\r\n    const categoryOrder = ['comfort', 'kitchen', 'entertainment', 'recreation', 'wellness', 'outdoor', 'connectivity', 'services', 'family', 'general'];\r\n    \r\n    const sortedGrouped = {};\r\n    categoryOrder.forEach(category => {\r\n      if (grouped[category]) {\r\n        sortedGrouped[categoryNames[category]] = grouped[category];\r\n      }\r\n    });\r\n\r\n    return sortedGrouped;\r\n  }, [chalet?.amenities]);\r\n\r\n  // Effects\r\n  useEffect(() => {\r\n    if (chalet) {\r\n      setLikesCount(chalet.likes_count || 0);\r\n      setIsLiked(checkIfLiked());\r\n    }\r\n  }, [chalet, checkIfLiked]);\r\n\r\n  // Initialize contact form message when chalet loads\r\n  useEffect(() => {\r\n    if (chalet && !contactForm.message) {\r\n      setContactForm(prev => ({\r\n        ...prev,\r\n        message: `I'm interested in ${chalet.title}. Please provide more information about availability and pricing.`\r\n      }));\r\n    }\r\n  }, [chalet, contactForm.message]);\r\n\r\n  // Optimized server sync\r\n  useEffect(() => {\r\n    if (!chalet?.id || !isAuthenticated) return;\r\n\r\n    const syncTimer = setTimeout(async () => {\r\n      try {\r\n        const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/check_is_favorite.php`, {\r\n          method: 'POST',\r\n          credentials: 'include',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ chaletId: chalet.id }),\r\n        });\r\n        \r\n        const data = await response.json();\r\n        \r\n        if (data.success && data.isFavorite !== isLiked) {\r\n          setIsLiked(data.isFavorite);\r\n          // Update localStorage to match server\r\n          const favorites = getFavoritesFromStorage();\r\n          if (data.isFavorite && !favorites.includes(chalet.id.toString())) {\r\n            localStorage.setItem('favorites', JSON.stringify([...favorites, chalet.id.toString()]));\r\n          } else if (!data.isFavorite && favorites.includes(chalet.id.toString())) {\r\n            localStorage.setItem('favorites', JSON.stringify(favorites.filter(favId => favId !== chalet.id.toString())));\r\n          }\r\n        }\r\n      } catch (err) {\r\n        // Silently fail\r\n      }\r\n    }, 1000); // Delay to reduce initial load impact\r\n\r\n    return () => clearTimeout(syncTimer);\r\n  }, [chalet?.id, isAuthenticated, isLiked, getFavoritesFromStorage]);\r\n\r\n  // Data fetching\r\n  useEffect(() => {\r\n    const fetchChaletData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        let apiUrl;\r\n        if (propertyIdFromState) {\r\n          apiUrl = `${process.env.REACT_APP_API_BASE_URL}/get_chalet.php?id=${propertyIdFromState}`;\r\n        } else {\r\n          apiUrl = `${process.env.REACT_APP_API_BASE_URL}/get_chalet_by_slug.php?slug=${slug}`;\r\n        }\r\n        \r\n        const response = await fetch(apiUrl, {\r\n          method: 'GET',\r\n          mode: 'cors',\r\n          headers: { 'Accept': 'application/json' }\r\n        });\r\n        \r\n        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);\r\n        \r\n        const data = await response.json();\r\n        \r\n        // Process images\r\n        if (data.images && Array.isArray(data.images)) {\r\n          data.images = data.images.map(img => formatImageUrl(img));\r\n        } else if (data.main_image) {\r\n          data.images = [formatImageUrl(data.main_image)];\r\n        } else {\r\n          data.images = [\"/placeholder.jpg\"];\r\n        }\r\n        \r\n        // Process features\r\n        if (data.features) {\r\n          data.features = data.features.map(feature => ({\r\n            ...feature,\r\n            iconComponent: getIconComponent(feature.icon)\r\n          }));\r\n        } else {\r\n          data.features = [];\r\n        }\r\n        \r\n        // Process amenities\r\n        if (data.amenities) {\r\n          if (typeof data.amenities === 'string') {\r\n            data.amenities = data.amenities.split(',').map(item => item.trim());\r\n          }\r\n          \r\n          data.amenities = data.amenities.map(amenity => {\r\n            const amenityData = getAmenityWithIcon(amenity);\r\n            return {\r\n              name: amenity,\r\n              icon: amenityData.icon,\r\n              category: amenityData.category\r\n            };\r\n          });\r\n        } else {\r\n          data.amenities = [];\r\n        }\r\n        \r\n        setChalet(data);\r\n      } catch (err) {\r\n        setError(`Error loading chalet details: ${err.message}`);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchChaletData();\r\n  }, [slug, propertyIdFromState, getIconComponent, getAmenityWithIcon]);\r\n\r\n  // Handle image loading\r\n  const handleImageLoad = useCallback((index) => {\r\n    setImagesLoaded(prev => new Set([...prev, index]));\r\n  }, []);\r\n\r\n  // Slug correction\r\n  useEffect(() => {\r\n    if (chalet && chalet.title) {\r\n      const correctSlug = createSlug(chalet.title);\r\n      if (slug !== correctSlug) {\r\n        navigate(`/chalet/${correctSlug}`, { \r\n          replace: true,\r\n          state: { propertyId: chalet.id }\r\n        });\r\n      }\r\n    }\r\n  }, [chalet, navigate, slug, createSlug]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"chalet-detail-page\">\r\n        <Navbar />\r\n        <div className=\"loading-container\">Loading chalet details...</div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (error && !chalet) {\r\n    return (\r\n      <div className=\"chalet-detail-page\">\r\n        <Navbar />\r\n        <div className=\"error-container\">\r\n          <p>{error}</p>\r\n          <button className=\"back-button\" onClick={handleBackToListings}>Back to Listings</button>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (!chalet) {\r\n    return (\r\n      <div className=\"chalet-detail-page\">\r\n        <Navbar />\r\n        <div className=\"error-container\">\r\n          <p>Chalet not found.</p>\r\n          <button className=\"back-button\" onClick={handleBackToListings}>Back to Listings</button>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"chalet-detail-page\">\r\n      <Navbar />\r\n      \r\n      <main className=\"chalet-container\">\r\n        <div className=\"chalet-gallery\">\r\n          <div className=\"main-image\">\r\n            {!imagesLoaded.has(currentImageIndex) && (\r\n              <div className=\"image-placeholder\">Loading...</div>\r\n            )}\r\n            <img \r\n              src={chalet.images[currentImageIndex]} \r\n              alt={chalet.title} \r\n              onClick={() => openLightbox(currentImageIndex)}\r\n              onLoad={() => handleImageLoad(currentImageIndex)}\r\n              onError={(e) => {\r\n                e.target.onerror = null; \r\n                e.target.src = \"/placeholder.jpg\";\r\n                handleImageLoad(currentImageIndex);\r\n              }}\r\n              style={{ opacity: imagesLoaded.has(currentImageIndex) ? 1 : 0 }}\r\n            />\r\n            <button className=\"nav-button left\" onClick={prevImage}>\r\n              <FiChevronLeft />\r\n            </button>\r\n            <button className=\"nav-button right\" onClick={nextImage}>\r\n              <FiChevronRight />\r\n            </button>\r\n          </div>\r\n          <div className=\"thumbnail-grid\">\r\n            {chalet.images.slice(0, 3).map((img, index) => (\r\n              <div \r\n                key={index} \r\n                className={`thumbnail ${index === currentImageIndex ? 'active' : ''}`}\r\n                onClick={() => setCurrentImageIndex(index)}\r\n              >\r\n                <img \r\n                  src={img} \r\n                  alt={`${chalet.title} ${index + 1}`} \r\n                  onClick={() => openLightbox(index)}\r\n                  loading=\"lazy\"\r\n                  onError={(e) => {\r\n                    e.target.onerror = null; \r\n                    e.target.src = \"/placeholder.jpg\";\r\n                  }}\r\n                />\r\n              </div>\r\n            ))}\r\n            {chalet.images.length > 4 && (\r\n              <div className=\"thumbnail more-images\" onClick={() => openLightbox(4)}>\r\n                <div className=\"more-count\">+{chalet.images.length - 4}</div>\r\n                <img \r\n                  src={chalet.images[4]} \r\n                  alt=\"More images\"\r\n                  loading=\"lazy\"\r\n                  onError={(e) => {\r\n                    e.target.onerror = null; \r\n                    e.target.src = \"/placeholder.jpg\";\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {showLightbox && (\r\n          <div className=\"lightbox\" onClick={closeLightbox}>\r\n            <div className=\"lightbox-content\" onClick={(e) => e.stopPropagation()}>\r\n              <button className=\"close-btn\" onClick={closeLightbox}>\r\n                <FiX />\r\n              </button>\r\n              <img \r\n                src={chalet.images[currentImageIndex]} \r\n                alt={chalet.title}\r\n                onError={(e) => {\r\n                  e.target.onerror = null; \r\n                  e.target.src = \"/placeholder.jpg\";\r\n                }}\r\n              />\r\n              <button className=\"nav-button left\" onClick={(e) => { e.stopPropagation(); prevImage(); }}>\r\n                <FiChevronLeft />\r\n              </button>\r\n              <button className=\"nav-button right\" onClick={(e) => { e.stopPropagation(); nextImage(); }}>\r\n                <FiChevronRight />\r\n              </button>\r\n              <div className=\"image-counter\">\r\n                {currentImageIndex + 1} / {chalet.images.length}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"chalet-content\">\r\n          <div className=\"chalet-header\">\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n              <div style={{ flex: 1 }}>\r\n                <h1>{chalet.title}</h1>\r\n              </div>\r\n              \r\n              {/* Like button on the right side */}\r\n              <NewLikeButton\r\n                isLiked={isLiked}\r\n                isLoading={isLikeLoading}\r\n                onClick={handleLikeClick}\r\n                disabled={isLikeLoading}\r\n              />\r\n            </div>\r\n            \r\n            {/* Location and rating badges under the title */}\r\n            <div className=\"chalet-badges\">\r\n              <div className=\"location\">\r\n                <FiMapPin /> {chalet.city}, {chalet.canton || 'Switzerland'}\r\n              </div>\r\n              <div className=\"rating\">\r\n                <FiHeart /> \r\n                {likesCount} {likesCount === 1 ? 'like' : 'likes'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"price-section\">\r\n            <div className=\"price\">\r\n              <span className=\"main-price\">{displayValues.price}</span>\r\n            </div>\r\n            <div className={`status ${chalet.status ? chalet.status.toLowerCase() : 'available'}`}>\r\n              {chalet.status || 'Available'}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"quick-facts\">\r\n            <div className=\"fact\">\r\n              <FiHome /> {displayValues.beds} bedrooms\r\n            </div>\r\n            <div className=\"fact\">\r\n              <FiDroplet /> {displayValues.baths} bathrooms\r\n            </div>\r\n            <div className=\"fact\">\r\n              <FiLayers /> {displayValues.sqft} sqft\r\n            </div>\r\n            <div className=\"fact\">\r\n              <FiUsers /> Sleeps {displayValues.beds * 2}\r\n            </div>\r\n            <div className=\"fact\">\r\n              <FiCalendar /> {displayValues.availability}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"description-section\">\r\n            <h2>About this chalet</h2>\r\n            <p>{chalet.description || 'Detailed description coming soon.'}</p>\r\n          </div>\r\n\r\n          {chalet.features.length > 0 && (\r\n            <div className=\"features-section\">\r\n              <h2>Chalet Features</h2>\r\n              <div className=\"features-grid\">\r\n                {chalet.features.map((feature, index) => (\r\n                  <div key={index} className=\"feature\">\r\n                    <span className=\"feature-icon\">{feature.iconComponent}</span>\r\n                    <span>{feature.name}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {chalet.amenities.length > 0 && (\r\n            <div className=\"amenities-section\">\r\n              <h2>Amenities & Services</h2>\r\n              <div className=\"amenities-grid\">\r\n                {chalet.amenities.map((amenity, index) => (\r\n                  <div key={index} className=\"amenity-item\">\r\n                    <div className=\"amenity-icon\">\r\n                      {amenity.icon}\r\n                    </div>\r\n                    <span className=\"amenity-name\">{amenity.name}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"location-section\">\r\n            <h2>Location</h2>\r\n            <ChaletMapEmbed chalet={chalet} />\r\n          </div>\r\n\r\n          <div className=\"contact-section\" ref={contactFormRef}>\r\n            <h2>Contact for more information</h2>\r\n            \r\n            {submitMessage && (\r\n              <div className={`submit-message ${submitStatus}`}>\r\n                {submitMessage}\r\n              </div>\r\n            )}\r\n            \r\n            <form className=\"contact-form\" onSubmit={handleContactFormSubmit}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"name\">Name *</label>\r\n                <input \r\n                  type=\"text\" \r\n                  id=\"name\" \r\n                  name=\"name\"\r\n                  value={contactForm.name}\r\n                  onChange={handleContactFormChange}\r\n                  required \r\n                  disabled={isSubmitting}\r\n                  placeholder=\"Your full name\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"email\">Email *</label>\r\n                <input \r\n                  type=\"email\" \r\n                  id=\"email\" \r\n                  name=\"email\"\r\n                  value={contactForm.email}\r\n                  onChange={handleContactFormChange}\r\n                  required \r\n                  disabled={isSubmitting}\r\n                  placeholder=\"your.email@example.com\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"phone\">Phone</label>\r\n                <input \r\n                  type=\"tel\" \r\n                  id=\"phone\" \r\n                  name=\"phone\"\r\n                  value={contactForm.phone}\r\n                  onChange={handleContactFormChange}\r\n                  disabled={isSubmitting}\r\n                  placeholder=\"+41 XX XXX XX XX\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"message\">Message *</label>\r\n                <textarea \r\n                  id=\"message\" \r\n                  name=\"message\"\r\n                  rows=\"4\" \r\n                  value={contactForm.message}\r\n                  onChange={handleContactFormChange}\r\n                  required\r\n                  disabled={isSubmitting}\r\n                  placeholder={`I'm interested in ${chalet?.title || 'this property'}. Please provide more information about availability and pricing.`}\r\n                />\r\n              </div>\r\n              \r\n              <button \r\n                type=\"submit\" \r\n                className=\"submit-btn\"\r\n                disabled={isSubmitting}\r\n              >\r\n                {isSubmitting ? (\r\n                  <>\r\n                    <span className=\"spinner\"></span>\r\n                    Sending...\r\n                  </>\r\n                ) : (\r\n                  'Send Inquiry'\r\n                )}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        <aside className=\"booking-sidebar\">\r\n          <div className=\"booking-card\">\r\n            <h3>Make an Inquiry</h3>\r\n            <div className=\"price-display\">\r\n              <span className=\"main-price\">{displayValues.price}</span>\r\n            </div>\r\n            \r\n            <div className=\"availability\">\r\n              <FiCalendar /> Available: {displayValues.availability}\r\n            </div>\r\n            \r\n            <div className=\"likes-info\">\r\n              <FiHeart /> {likesCount} {likesCount === 1 ? 'person likes' : 'people like'} this chalet\r\n            </div>\r\n            \r\n            <button className=\"book-now-btn\" onClick={scrollToContactForm}>\r\n              Book Now\r\n            </button>\r\n            \r\n            <button className=\"contact-btn\" onClick={scrollToContactForm}>\r\n              Contact Agent\r\n            </button>\r\n            \r\n            <div className=\"property-facts\">\r\n              <div className=\"fact\">\r\n                <FiHome /> {displayValues.type}\r\n              </div>\r\n              <div className=\"fact\">\r\n                <FiUsers /> Sleeps {displayValues.beds * 2}\r\n              </div>\r\n              <div className=\"fact\">\r\n                <FiLayers /> {displayValues.sqft} sqft\r\n              </div>\r\n              <div className=\"fact\">\r\n                Built in {displayValues.yearBuilt}\r\n              </div>\r\n              <div className=\"fact\">\r\n                {displayValues.floors} floors\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </aside>\r\n\r\n        {showLoginPopup && (\r\n          <div className=\"login-popup-overlay\" onClick={closeLoginPopup}>\r\n            <div className=\"login-popup\" onClick={(e) => e.stopPropagation()}>\r\n              <div className=\"login-popup-header\">\r\n                <h3>Login Required</h3>\r\n                <button className=\"close-popup\" onClick={closeLoginPopup}>×</button>\r\n              </div>\r\n              <div className=\"login-popup-content\">\r\n                <FiHeart className=\"popup-heart-icon\" />\r\n                <p>You need to be logged in to add chalets to your favorites.</p>\r\n                <div className=\"login-popup-actions\">\r\n                  <button className=\"login-btn\" onClick={handleLoginRedirect}>Login Now</button>\r\n                  <button className=\"cancel-btn\" onClick={closeLoginPopup}>Cancel</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n      \r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChaletDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}